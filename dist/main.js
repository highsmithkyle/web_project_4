!function(){"use strict";var e={modalSelector:"modal",profileModalSelector:"modal_profile",modalProfile:document.querySelector(".modal_profile"),profileFormEL:document.querySelector(".modal__form_type_edit-form"),profileEditButton:document.querySelector(".profile__edit-button"),profileFormCloseButton:document.querySelector(".modal__close-button_type_profile"),profileAddButton:document.querySelector(".profile__add-button"),profileFormNameInput:document.querySelector(".modal__info_place_name-input"),profileFormAboutMeInput:document.querySelector(".modal__info_place_about-me-input"),profileTitle:document.querySelector(".profile__title"),profileSubtitle:document.querySelector(".profile__subtitle")},t={addCardSelector:"modal_add-card",deleteCardSelector:"modal_delete",deleteCardForm:"modal__form_type_delete",addModalEl:document.querySelector(".modal_add-card"),addFormEl:document.querySelector(".modal__form_type_new-place"),addFormCloseButton:document.querySelector(".modal__close-button_type_new-place"),addFormPlaceInput:document.querySelector(".modal__info_place_new-title-input"),addFormUrlInput:document.querySelector(".modal__info_place_url-input")},r={avatarModalSelector:"modal_avatar",avatarEditButton:document.querySelector(".profile__avatar-button"),avatarFormEl:document.querySelector(".modal__form_type_avatar"),avatarElement:document.querySelector(".profile__image")},n={formSelector:"modal__form",inputSelector:".modal__info",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__info_type_error",errorClass:"modal__error_active"};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t,r){var n=t.data,o=t.handlePreviewImage,i=t.handleLikeIcon,a=t.handleDeleteIcon,l=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userId=l,this._name=n.name,this._link=n.link,this._likedCard=n.likes,this._numberLikes=n.likes.length,this._handlePreviewImage=o,this._handleLikeIcon=i,this._handleDeleteIcon=a,this._cardId=n._id,this._ownerId=n.owner._id,this._cardSelector=r}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){var e=document.querySelector(this._cardSelector).content.querySelector(".elements__container").cloneNode(!0);this._element=e}},{key:"getView",value:function(){this._getTemplate(),this._setEventListeners();var e=this._element.querySelector(".elements__image");return this._element.querySelector(".elements__text").textContent=this._name,e.src=this._link,e.alt=this._name,this._getInitialLikes(e),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__image").addEventListener("click",(function(){return e._handlePreviewImage()})),this._deleteButton=this._element.querySelector(".elements__delete"),this._ownerId===this._userId?this._deleteButton.addEventListener("click",(function(t){e._handleDeleteIcon(t)})):this._deleteButton.remove(),this._heartLike=this._element.querySelector(".elements__heart"),this._heartLike.addEventListener("click",(function(t){e._liked(t)}))}},{key:"_checkLikes",value:function(e){this._element.querySelector(".elements__heart-number").textContent=e.likes.length}},{key:"_liked",value:function(e){var t=this;this._handleLikeIcon(!e.target.classList.contains("elements__heart_active")).then((function(r){e.target.classList.toggle("elements__heart_active"),t._checkLikes(r)})).catch((function(e){console.error(e)}))}},{key:"_getInitialLikes",value:function(){var e=this;this._likedCard.some((function(t){return t._id===e._userId}))&&this._heartLike.classList.add("elements__heart_active"),this._element.querySelector(".elements__heart-number").textContent=this._numberLikes}}])&&o(t.prototype,r),e}();function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_showInputError",(function(e){var t=n._formEl.querySelector("#"+e.id+"-error");e.classList.add(n._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(n._errorClass)})),c(this,"_hideInputError",(function(e){var t=n._formEl.querySelector("#"+e.id+"-error");e.classList.remove(n._inputErrorClass),t.classList.remove(n._errorClass),t.textContent=""})),c(this,"_checkInputValidity",(function(e){e.validity.valid?n._hideInputError(e):n._showInputError(e)})),c(this,"_hasValidInputs",(function(e){return e.every((function(e){return e.validity.valid}))})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formEl=r}var t,r;return t=e,(r=[{key:"_toggleButton",value:function(){this._hasValidInputs(this._inputList)?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e,t=this;this._inputList=function(e){if(Array.isArray(e))return a(e)}(e=this._formEl.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputList.forEach((function(e){e.addEventListener("input",(function(r){t._checkInputValidity(e),t._toggleButton()}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButton(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._formEl.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&l(t.prototype,r),e}();function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modalElement=document.querySelector(".".concat(t)),this._handleEscClose=this._handleEscClose.bind(this)}var t,r;return t=e,(r=[{key:"setEventListeners",value:function(){var e=this;this._modalElement.addEventListener("click",(function(t){(t.target.classList.contains("modal")||t.target.classList.contains("modal__close-button"))&&e.close()}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._modalElement.classList.add("modal_toggle"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._modalElement.classList.remove("modal_toggle"),document.removeEventListener("keydown",this._handleEscClose)}}])&&s(t.prototype,r),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t,r){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}},_(e,t,r||e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function y(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function a(){return h(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"open",value:function(e){var t=e.link,r=e.name;this._modalElement.querySelector(".modal__image-subtitle").textContent=r;var n=this._modalElement.querySelector(".modal__image-preview");n.src=t,n.alt=r,_(v(a.prototype),"open",this).call(this)}}])&&m(t.prototype,r),a}(f),E=b;function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t,r){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}},k(e,t,r||e)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function I(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(n);if(o){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return I(this,e)});function a(e){var t,r=e.popupSelector,n=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,r))._popupForm=t._modalElement.querySelector(".modal__form"),t._handleFormSubmit=n,t._button=t._modalElement.querySelector(".modal__save-button"),t}return t=a,(r=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=Array.from(this._modalElement.querySelectorAll(".modal__info")),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._modalElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()})),k(C(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._popupForm.reset(),k(C(a.prototype),"close",this).call(this)}}])&&g(t.prototype,r),a}(f);function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var P=function(){function e(t,r){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(".".concat(r))}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&O(t.prototype,r),e}();function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function e(t){var r=t.userNameElement,n=t.userDescriptionElement,o=t.userAvatarElement,i=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameEl=r,this._userDescriptionEl=n,this._userAvatarElement=o,this._userId=i}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{userName:this._userNameEl.textContent,userDescription:this._userDescriptionEl.textContent}}},{key:"getId",value:function(){return this._userId}},{key:"setUserInfo",value:function(e){this._userNameEl.textContent=e.name,this._userDescriptionEl.textContent=e.about,this._userAvatarElement.src=e.avatar,this._userId=e._id}},{key:"setAvatarImage",value:function(e){this._userAvatarElement.src=e.avatar}}])&&q(t.prototype,r),e}();function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t,r){document.querySelector(".".concat(t)).querySelector(".modal__save-button").textContent=r}var U=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,r;return t=e,(r=[{key:"_checkErrors",value:function(e){return e.ok?e.json():Promise.reject("Error")}},{key:"getInitialProfile",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._checkErrors(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._checkErrors(t)}))}},{key:"fetchCard",value:function(e){var t=this,r=e.name,n=e.link;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:r,link:n})}).then((function(e){return t._checkErrors(e)}))}},{key:"fetchProfileInfo",value:function(e){var t=this,r=e.name,n=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:r,about:n})}).then((function(e){return t._checkErrors(e)}))}},{key:"changeProfileAvatar",value:function(e){var t=this,r=e.avatar;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:r})}).then((function(e){return t._checkErrors(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._checkErrors(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._checkErrors(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._checkErrors(e)}))}}])&&B(t.prototype,r),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"f4ba53cb-c4b1-4360-b78c-98b41af44bf6","Content-Type":"application/json"}}),F=U.getInitialProfile(),D=U.getInitialCards();Promise.all([F,D]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];R.setUserInfo(o),x.renderItems(i.reverse())})).catch((function(e){console.error(e)}));var V=function(e){return new i({data:e,handlePreviewImage:function(){$.open(e)},handleDeleteIcon:function(t){N.open(t,e._id)},handleLikeIcon:function(t){return t?U.likeCard(e._id):U.removeLike(e._id)},userId:R.getId()},"#elements-template")},x=new P({renderer:function(e){var t=V(e).getView();x.addItem(t)}},"elements"),R=new j({userNameElement:e.profileTitle,userDescriptionElement:e.profileSubtitle,userAvatarElement:r.avatarElement}),M=new L({popupSelector:t.addCardSelector,handleFormSubmit:function(e){T(0,t.addCardSelector,"Creating..."),U.fetchCard(e).then((function(e){var t=V(e);x.addItem(t.getView()),M.close()})).catch((function(e){console.error(e)})).finally((function(){T(0,t.addCardSelector,"Create")}))}}),N=new L({popupSelector:t.deleteCardSelector,handleFormSubmit:function(e,r){T(0,t.deleteCardSelector,"Deleting..."),U.deleteCard(r).then((function(){e.remove(),N.close()})).catch((function(e){console.error(e)})).finally((function(){T(0,t.deleteCardSelector,"Delete")}))}}),J=new L({popupSelector:e.profileModalSelector,handleFormSubmit:function(t){T(0,e.profileModalSelector,"Updating..."),U.fetchProfileInfo(t).then((function(e){R.setUserInfo(e),J.setUserInfo(e),J.close()})).catch((function(e){console.error(e)})).finally((function(){T(0,e.profileModalSelector,"Update")}))}}),H=new L({popupSelector:r.avatarModalSelector,handleFormSubmit:function(e){T(0,r.avatarModalSelector,"Updating..."),U.changeProfileAvatar(e).then((function(e){R.setAvatarImage(e),H.close()})).catch((function(e){console.error(e)})).finally((function(){T(0,r.avatarModalSelector,"Update")}))}}),$=new E("modal_type_image-expand"),z=new u(n,e.profileFormEL),G=new u(n,t.addFormEl),K=new u(n,r.avatarFormEl);z.enableValidation(),G.enableValidation(),K.enableValidation(),M.setEventListeners(),J.setEventListeners(),$.setEventListeners(),H.setEventListeners(),N.setEventListeners(),e.profileAddButton.addEventListener("click",(function(){G.resetValidation(),M.open()})),e.profileEditButton.addEventListener("click",(function(){var t=R.getUserInfo();e.profileFormNameInput.value=t.userName,e.profileFormAboutMeInput.value=t.userDescription,z.resetValidation(),J.open()})),r.avatarEditButton.addEventListener("click",(function(){K.resetValidation(),H.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMxRXlNLEVBQXNCLElBQUlsSSxFQUFjOUQsRUFBb0JMLEVBQWdCRyxjQUdsRmdNLEVBQXFCRyxtQkFDckJGLEVBQWlCRSxtQkFDakJELEVBQW9CQyxtQkFHcEJsQixFQUFhbUIsb0JBQ2JaLEVBQWFZLG9CQUNiN0IsRUFBaUI2QixvQkFDakJSLEVBQXlCUSxvQkFDekIzQixFQUFnQjJCLG9CQU9oQjlOLEVBQWlCUyxpQkFBaUI4RCxpQkFBaUIsU0FBUyxXQUMxRG9KLEVBQWlCSSxrQkFDakJwQixFQUFhVCxVQUdmbE0sRUFBaUJPLGtCQUFrQmdFLGlCQUFpQixTQUFTLFdBRTNELElBQU15SixFQUFjckMsRUFBU3NDLGNBQzdCak8sRUFBaUJVLHFCQUFxQitILE1BQVF1RixFQUFZckUsU0FDMUQzSixFQUFpQlcsd0JBQXdCOEgsTUFBUXVGLEVBQVlwRSxnQkFFN0Q4RCxFQUFxQkssa0JBQ3JCYixFQUFhaEIsVUFHZjNLLEVBQWdCRSxpQkFBaUI4QyxpQkFBaUIsU0FBUyxXQUN6RHFKLEVBQW9CRyxrQkFDcEJULEVBQXlCcEIsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2FyZENvbnN0YW50cyA9IHtcbiAgICBjYXJkU2VsZWN0b3I6ICcjZWxlbWVudHMtdGVtcGxhdGUnLFxuICAgIHBsYWNlU2VsZWN0b3I6ICdlbGVtZW50cycsXG59XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlQ29uc3RhbnRzID0ge1xuXG4gICAgbW9kYWxTZWxlY3RvcjogXCJtb2RhbFwiLFxuICAgIHByb2ZpbGVNb2RhbFNlbGVjdG9yOiBcIm1vZGFsX3Byb2ZpbGVcIixcbiAgICBtb2RhbFByb2ZpbGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfcHJvZmlsZVwiKSxcbiAgICBwcm9maWxlRm9ybUVMOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX3R5cGVfZWRpdC1mb3JtXCIpLFxuICAgIHByb2ZpbGVFZGl0QnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpLFxuICAgIHByb2ZpbGVGb3JtQ2xvc2VCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvbl90eXBlX3Byb2ZpbGVcIiksXG4gICAgcHJvZmlsZUFkZEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpLFxuICAgIHByb2ZpbGVGb3JtTmFtZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbmZvX3BsYWNlX25hbWUtaW5wdXRcIiksXG4gICAgcHJvZmlsZUZvcm1BYm91dE1lSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2luZm9fcGxhY2VfYWJvdXQtbWUtaW5wdXRcIiksXG4gICAgcHJvZmlsZVRpdGxlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpLFxuICAgIHByb2ZpbGVTdWJ0aXRsZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKSxcbn1cblxuZXhwb3J0IGNvbnN0IGFkZENhcmRDb25zdGFudHMgPSB7XG5cbiAgICBhZGRDYXJkU2VsZWN0b3I6IFwibW9kYWxfYWRkLWNhcmRcIixcbiAgICBkZWxldGVDYXJkU2VsZWN0b3I6IFwibW9kYWxfZGVsZXRlXCIsXG4gICAgZGVsZXRlQ2FyZEZvcm06IFwibW9kYWxfX2Zvcm1fdHlwZV9kZWxldGVcIixcbiAgICBhZGRNb2RhbEVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2FkZC1jYXJkXCIpLFxuICAgIGFkZEZvcm1FbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV90eXBlX25ldy1wbGFjZVwiKSxcbiAgICBhZGRGb3JtQ2xvc2VCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvbl90eXBlX25ldy1wbGFjZVwiKSxcbiAgICBhZGRGb3JtUGxhY2VJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5mb19wbGFjZV9uZXctdGl0bGUtaW5wdXRcIiksXG4gICAgYWRkRm9ybVVybElucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbmZvX3BsYWNlX3VybC1pbnB1dFwiKSxcbn1cblxuZXhwb3J0IGNvbnN0IGltYWdlUHJldmlld0NvbnN0YW50cyA9IHtcbiAgICBpbWFnZVByZXZpZXdTZWxlY3RvcjogXCJtb2RhbF90eXBlX2ltYWdlLWV4cGFuZFwiLFxufVxuXG5leHBvcnQgY29uc3QgYXZhdGFyQ29uc3RhbnRzID0ge1xuXG5cbiAgICBhdmF0YXJNb2RhbFNlbGVjdG9yOiBcIm1vZGFsX2F2YXRhclwiLFxuICAgIGF2YXRhckVkaXRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ1dHRvblwiKSxcbiAgICBhdmF0YXJGb3JtRWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fdHlwZV9hdmF0YXJcIiksXG4gICAgYXZhdGFyRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKVxufVxuXG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG5cbiAgICBmb3JtU2VsZWN0b3I6IFwibW9kYWxfX2Zvcm1cIixcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5mb1wiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5mb190eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfYWN0aXZlXCIsXG59XG5cblxuIiwiY2xhc3MgQ2FyZCB7XG5cbiAgICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZVByZXZpZXdJbWFnZSwgaGFuZGxlTGlrZUljb24sIGhhbmRsZURlbGV0ZUljb24sIHVzZXJJZCB9LCBjYXJkU2VsZWN0b3IpIHtcblxuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX2xpa2VkQ2FyZCA9IGRhdGEubGlrZXM7XG4gICAgICAgIHRoaXMuX251bWJlckxpa2VzID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX2hhbmRsZVByZXZpZXdJbWFnZSA9IGhhbmRsZVByZXZpZXdJbWFnZTtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24gPSBoYW5kbGVMaWtlSWNvbjtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlSWNvbiA9IGhhbmRsZURlbGV0ZUljb247XG4gICAgICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgICAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG5cblxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jb250YWluZXJcIilcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGNhcmRFbGVtZW50XG4gICAgfVxuXG5cbiAgICBnZXRWaWV3KCkge1xuXG4gICAgICAgIHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pbWFnZVwiKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lXG4gICAgICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5fZ2V0SW5pdGlhbExpa2VzKGNhcmRJbWFnZSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG5cbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltYWdlXCIpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZVByZXZpZXdJbWFnZSgpKTtcblxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2RlbGV0ZVwiKTtcbiAgICAgICAgaWYgKHRoaXMuX293bmVySWQgPT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlSWNvbihldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faGVhcnRMaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19oZWFydFwiKVxuICAgICAgICB0aGlzLl9oZWFydExpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9saWtlZChlKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIF9jaGVja0xpa2VzKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19oZWFydC1udW1iZXJcIikudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBfbGlrZWQoZSkge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbihcbiAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJlbGVtZW50c19faGVhcnRfYWN0aXZlXCIpXG4gICAgICAgICkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRzX19oZWFydF9hY3RpdmVcIik7XG4gICAgICAgICAgICB0aGlzLl9jaGVja0xpa2VzKGRhdGEpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9nZXRJbml0aWFsTGlrZXMoKSB7XG4gICAgICAgIGNvbnN0IHVzZXJMaWtlQ2FyZCA9IHRoaXMuX2xpa2VkQ2FyZC5zb21lKChpdGVtKSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgICAgICAgaWYgKHVzZXJMaWtlQ2FyZCkge1xuICAgICAgICAgICAgdGhpcy5faGVhcnRMaWtlLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19faGVhcnRfYWN0aXZlXCIpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19oZWFydC1udW1iZXJcIikudGV4dENvbnRlbnQgPSB0aGlzLl9udW1iZXJMaWtlcztcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG5cblxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG5cbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG5cbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0KSA9PiB7XG5cbiAgICBjb25zdCBlcnJvclNwYW4gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihcIiNcIiArIGlucHV0LmlkICsgXCItZXJyb3JcIilcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JTcGFuLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JTcGFuLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG5cbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dCkgPT4ge1xuXG4gICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yU3Bhbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXQpID0+IHtcblxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNWYWxpZElucHV0cyA9IChpbnB1dExpc3QpID0+IHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cblxuICBfdG9nZ2xlQnV0dG9uKCkge1xuXG4gICAgaWYgKHRoaXMuX2hhc1ZhbGlkSW5wdXRzKHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXG4gICAgfVxuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcblxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcblxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwb3B1cFNlbGVjdG9yfWApO1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcblxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfdG9nZ2xlXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfdG9nZ2xlXCIpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxufVxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cCc7XG5cblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgb3Blbih7IGxpbmssIG5hbWUgfSkge1xuICAgICAgICB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2Utc3VidGl0bGVcIikudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1wcmV2aWV3XCIpO1xuICAgICAgICBpbWFnZS5zcmMgPSBsaW5rO1xuICAgICAgICBpbWFnZS5hbHQgPSBuYW1lO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG5cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3RvcilcblxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXRcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpXG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbmZvXCIpKTtcblxuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NvbnRhaW5lclNlbGVjdG9yfWApO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xuXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwiXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoeyB1c2VyTmFtZUVsZW1lbnQsIHVzZXJEZXNjcmlwdGlvbkVsZW1lbnQsIHVzZXJBdmF0YXJFbGVtZW50LCB1c2VySWQgfSkge1xuXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lRWwgPSB1c2VyTmFtZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbkVsID0gdXNlckRlc2NyaXB0aW9uRWxlbWVudDtcbiAgICAgICAgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQgPSB1c2VyQXZhdGFyRWxlbWVudDtcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lRWwudGV4dENvbnRlbnQsXG4gICAgICAgICAgICB1c2VyRGVzY3JpcHRpb246IHRoaXMuX3VzZXJEZXNjcmlwdGlvbkVsLnRleHRDb250ZW50LFxuICAgICAgICB9O1xuICAgIH1cblxuXG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySWRcbiAgICB9XG5cblxuICAgIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICAgICAgLy8gZGVidWdnZXI7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICAgICAgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQuc3JjID0gZGF0YS5hdmF0YXI7XG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IGRhdGEuX2lkO1xuICAgIH1cblxuXG5cbiAgICBzZXRBdmF0YXJJbWFnZShkYXRhKSB7XG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50LnNyYyA9IGRhdGEuYXZhdGFyO1xuICAgIH1cblxufVxuXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiXG5cbmltcG9ydCB7XG4gIGNhcmRDb25zdGFudHMsXG4gIGF2YXRhckNvbnN0YW50cyxcbiAgcHJvZmlsZUNvbnN0YW50cyxcbiAgYWRkQ2FyZENvbnN0YW50cyxcbiAgaW1hZ2VQcmV2aWV3Q29uc3RhbnRzLFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcblxuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCJcbi8vIGltcG9ydCBpbml0aWFsQ2FyZHMgZnJvbSBcIi4uL3V0aWxzL0luaXRpYWxDYXJkcy5qc1wiXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIlxuXG5cblxuZnVuY3Rpb24gY2hhbmdlTG9hZGluZ1RleHQobG9hZGluZywgcG9wdXBTZWxlY3RvciwgdGV4dCkge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3BvcHVwU2VsZWN0b3J9YCk7XG4gIGlmIChsb2FkaW5nKSB7XG4gICAgbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idXR0b25cIikudGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9IGVsc2Uge1xuICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxufVxuXG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiZjRiYTUzY2ItYzRiMS00MzYwLWI3OGMtOThiNDFhZjQ0YmY2XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuY29uc3QgaW5pdGlhbFByb2ZpbGUgPSBhcGkuZ2V0SW5pdGlhbFByb2ZpbGUoKTtcbmNvbnN0IGluaXRpYWxDYXJkcyA9IGFwaS5nZXRJbml0aWFsQ2FyZHMoKTtcblxuXG5cblByb21pc2UuYWxsKFtpbml0aWFsUHJvZmlsZSwgaW5pdGlhbENhcmRzXSlcblxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoY2FyZHMucmV2ZXJzZSgpKTtcbiAgfSlcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9KTtcblxuXG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YSxcbiAgICAgIGhhbmRsZVByZXZpZXdJbWFnZTogKCkgPT4ge1xuICAgICAgICBpbWFnZUV4cGFuZE1vZGFsLm9wZW4oZGF0YSlcbiAgICAgIH0sXG4gICAgICBoYW5kbGVEZWxldGVJY29uOiAoZXZ0KSA9PiB7XG4gICAgICAgIGRlbGV0ZUNhcmRNb2RhbC5vcGVuKGV2dCwgZGF0YS5faWQpO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZUxpa2VJY29uOiAoYnV0dG9uTGlrZWQpID0+IHtcbiAgICAgICAgcmV0dXJuIGJ1dHRvbkxpa2VkID8gYXBpLmxpa2VDYXJkKGRhdGEuX2lkKSA6IGFwaS5yZW1vdmVMaWtlKGRhdGEuX2lkKVxuICAgICAgfSxcbiAgICAgIHVzZXJJZDogdXNlckluZm8uZ2V0SWQoKSxcbiAgICB9LFxuICAgIGNhcmRDb25zdGFudHMuY2FyZFNlbGVjdG9yXG4gICk7XG4gIHJldHVybiBjYXJkXG59XG5cblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoY2FyZCk7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuZ2V0VmlldygpO1xuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZENvbnN0YW50cy5wbGFjZVNlbGVjdG9yXG4pO1xuXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcblxuICB1c2VyTmFtZUVsZW1lbnQ6IHByb2ZpbGVDb25zdGFudHMucHJvZmlsZVRpdGxlLFxuICB1c2VyRGVzY3JpcHRpb25FbGVtZW50OiBwcm9maWxlQ29uc3RhbnRzLnByb2ZpbGVTdWJ0aXRsZSxcbiAgdXNlckF2YXRhckVsZW1lbnQ6IGF2YXRhckNvbnN0YW50cy5hdmF0YXJFbGVtZW50LFxufSk7XG5cblxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBhZGRDYXJkQ29uc3RhbnRzLmFkZENhcmRTZWxlY3RvcixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGNhcmQpID0+IHtcblxuICAgIGNoYW5nZUxvYWRpbmdUZXh0KHRydWUsIGFkZENhcmRDb25zdGFudHMuYWRkQ2FyZFNlbGVjdG9yLCBcIkNyZWF0aW5nLi4uXCIpXG5cbiAgICBhcGkuZmV0Y2hDYXJkKGNhcmQpLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQuZ2V0VmlldygpKTtcbiAgICAgIGFkZENhcmRNb2RhbC5jbG9zZSgpXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICBjaGFuZ2VMb2FkaW5nVGV4dChmYWxzZSwgYWRkQ2FyZENvbnN0YW50cy5hZGRDYXJkU2VsZWN0b3IsIFwiQ3JlYXRlXCIpO1xuICAgIH0pXG4gIH0sXG59KTtcblxuXG5jb25zdCBkZWxldGVDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IGFkZENhcmRDb25zdGFudHMuZGVsZXRlQ2FyZFNlbGVjdG9yLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoY2FyZEVsZW1lbnQsIGNhcmRJZCkgPT4ge1xuXG4gICAgY2hhbmdlTG9hZGluZ1RleHQodHJ1ZSwgYWRkQ2FyZENvbnN0YW50cy5kZWxldGVDYXJkU2VsZWN0b3IsIFwiRGVsZXRpbmcuLi5cIik7XG5cbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpLnRoZW4oKCkgPT4ge1xuXG4gICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZUNhcmRNb2RhbC5jbG9zZSgpO1xuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNoYW5nZUxvYWRpbmdUZXh0KGZhbHNlLCBhZGRDYXJkQ29uc3RhbnRzLmRlbGV0ZUNhcmRTZWxlY3RvciwgXCJEZWxldGVcIik7XG4gICAgfSlcbiAgfVxufSlcblxuXG5jb25zdCBwcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHByb2ZpbGVDb25zdGFudHMucHJvZmlsZU1vZGFsU2VsZWN0b3IsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChwcm9maWxlKSA9PiB7XG5cbiAgICBjaGFuZ2VMb2FkaW5nVGV4dCh0cnVlLCBwcm9maWxlQ29uc3RhbnRzLnByb2ZpbGVNb2RhbFNlbGVjdG9yLCBcIlVwZGF0aW5nLi4uXCIpXG5cbiAgICBhcGkuZmV0Y2hQcm9maWxlSW5mbyhwcm9maWxlKS50aGVuKChwcm9maWxlRGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZURhdGEpO1xuICAgICAgcHJvZmlsZU1vZGFsLnNldFVzZXJJbmZvKHByb2ZpbGVEYXRhKTtcbiAgICAgIHByb2ZpbGVNb2RhbC5jbG9zZSgpO1xuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICBjaGFuZ2VMb2FkaW5nVGV4dChmYWxzZSwgcHJvZmlsZUNvbnN0YW50cy5wcm9maWxlTW9kYWxTZWxlY3RvciwgXCJVcGRhdGVcIilcbiAgICB9KVxuICB9LFxufSk7XG5cblxuY29uc3QgY2hhbmdlUHJvZmlsZUF2YXRhck1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuXG4gIHBvcHVwU2VsZWN0b3I6IGF2YXRhckNvbnN0YW50cy5hdmF0YXJNb2RhbFNlbGVjdG9yLFxuXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChhdmF0YXIpID0+IHtcblxuICAgIGNoYW5nZUxvYWRpbmdUZXh0KHRydWUsIGF2YXRhckNvbnN0YW50cy5hdmF0YXJNb2RhbFNlbGVjdG9yLCBcIlVwZGF0aW5nLi4uXCIpXG5cbiAgICBhcGkuY2hhbmdlUHJvZmlsZUF2YXRhcihhdmF0YXIpLnRoZW4oKGF2YXRhckRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhckltYWdlKGF2YXRhckRhdGEpXG4gICAgICBjaGFuZ2VQcm9maWxlQXZhdGFyTW9kYWwuY2xvc2UoKTtcbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICBjaGFuZ2VMb2FkaW5nVGV4dChmYWxzZSwgYXZhdGFyQ29uc3RhbnRzLmF2YXRhck1vZGFsU2VsZWN0b3IsIFwiVXBkYXRlXCIpXG4gICAgfSk7XG5cbiAgfSxcbn0pO1xuXG5cblxuY29uc3QgaW1hZ2VFeHBhbmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZVByZXZpZXdDb25zdGFudHMuaW1hZ2VQcmV2aWV3U2VsZWN0b3IpO1xuXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgcHJvZmlsZUNvbnN0YW50cy5wcm9maWxlRm9ybUVMKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGFkZENhcmRDb25zdGFudHMuYWRkRm9ybUVsKTtcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGF2YXRhckNvbnN0YW50cy5hdmF0YXJGb3JtRWwpO1xuXG5cbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cblxuYWRkQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlRXhwYW5kTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmNoYW5nZVByb2ZpbGVBdmF0YXJNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuZGVsZXRlQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuXG4vLyBCdXR0b25zIC8vXG5cblxucHJvZmlsZUNvbnN0YW50cy5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XG59KVxuXG5wcm9maWxlQ29uc3RhbnRzLnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cbiAgY29uc3QgcHJvZmlsZUluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlQ29uc3RhbnRzLnByb2ZpbGVGb3JtTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZUluZm8udXNlck5hbWU7XG4gIHByb2ZpbGVDb25zdGFudHMucHJvZmlsZUZvcm1BYm91dE1lSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby51c2VyRGVzY3JpcHRpb247XG5cbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVNb2RhbC5vcGVuKCk7XG59KTtcblxuYXZhdGFyQ29uc3RhbnRzLmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgY2hhbmdlUHJvZmlsZUF2YXRhck1vZGFsLm9wZW4oKTtcbn0pXG5cblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gICAgfVxuXG4gICAgX2NoZWNrRXJyb3JzKHJlcykge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJFcnJvclwiKTtcbiAgICB9XG5cbiAgICBnZXRJbml0aWFsUHJvZmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tFcnJvcnMocmVzKSlcbiAgICB9XG5cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrRXJyb3JzKHJlcykpXG4gICAgfVxuXG4gICAgZmV0Y2hDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcbiAgICAgICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja0Vycm9ycyhyZXMpKVxuICAgIH1cblxuICAgIGZldGNoUHJvZmlsZUluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IG5hbWUsIGFib3V0OiBhYm91dCB9KSxcbiAgICAgICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja0Vycm9ycyhyZXMpKVxuICAgIH1cblxuICAgIGNoYW5nZVByb2ZpbGVBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBhdmF0YXIgfSlcbiAgICAgICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja0Vycm9ycyhyZXMpKTtcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tFcnJvcnMocmVzKSk7XG4gICAgfVxuXG4gICAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja0Vycm9ycyhyZXMpKTtcbiAgICB9XG5cbiAgICByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tFcnJvcnMocmVzKSk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJwcm9maWxlQ29uc3RhbnRzIiwibW9kYWxTZWxlY3RvciIsInByb2ZpbGVNb2RhbFNlbGVjdG9yIiwibW9kYWxQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUZvcm1FTCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUZvcm1DbG9zZUJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlRm9ybU5hbWVJbnB1dCIsInByb2ZpbGVGb3JtQWJvdXRNZUlucHV0IiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZVN1YnRpdGxlIiwiYWRkQ2FyZENvbnN0YW50cyIsImFkZENhcmRTZWxlY3RvciIsImRlbGV0ZUNhcmRTZWxlY3RvciIsImRlbGV0ZUNhcmRGb3JtIiwiYWRkTW9kYWxFbCIsImFkZEZvcm1FbCIsImFkZEZvcm1DbG9zZUJ1dHRvbiIsImFkZEZvcm1QbGFjZUlucHV0IiwiYWRkRm9ybVVybElucHV0IiwiYXZhdGFyQ29uc3RhbnRzIiwiYXZhdGFyTW9kYWxTZWxlY3RvciIsImF2YXRhckVkaXRCdXR0b24iLCJhdmF0YXJGb3JtRWwiLCJhdmF0YXJFbGVtZW50IiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZVByZXZpZXdJbWFnZSIsImhhbmRsZUxpa2VJY29uIiwiaGFuZGxlRGVsZXRlSWNvbiIsInVzZXJJZCIsInRoaXMiLCJfdXNlcklkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2xpa2VkQ2FyZCIsImxpa2VzIiwiX251bWJlckxpa2VzIiwibGVuZ3RoIiwiX2hhbmRsZVByZXZpZXdJbWFnZSIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVJY29uIiwiX2NhcmRJZCIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfY2FyZFNlbGVjdG9yIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkSW1hZ2UiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIl9nZXRJbml0aWFsTGlrZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsImV2dCIsInJlbW92ZSIsIl9oZWFydExpa2UiLCJlIiwiX2xpa2VkIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ0aGVuIiwidG9nZ2xlIiwiX2NoZWNrTGlrZXMiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsInNvbWUiLCJpdGVtIiwiYWRkIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJpbnB1dCIsImVycm9yU3BhbiIsIl9mb3JtRWwiLCJpZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9lcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0TGlzdCIsImV2ZXJ5IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9oYXNWYWxpZElucHV0cyIsIl9pbnB1dExpc3QiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uIiwiaW5wdXRFbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfbW9kYWxFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImNsb3NlIiwia2V5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2UiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9idXR0b24iLCJBcnJheSIsImZyb20iLCJfZm9ybVZhbHVlcyIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW1zIiwiVXNlckluZm8iLCJ1c2VyTmFtZUVsZW1lbnQiLCJ1c2VyRGVzY3JpcHRpb25FbGVtZW50IiwidXNlckF2YXRhckVsZW1lbnQiLCJfdXNlck5hbWVFbCIsIl91c2VyRGVzY3JpcHRpb25FbCIsIl91c2VyQXZhdGFyRWxlbWVudCIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwiYWJvdXQiLCJhdmF0YXIiLCJjaGFuZ2VMb2FkaW5nVGV4dCIsImxvYWRpbmciLCJ0ZXh0IiwiYXBpIiwiQXBpIiwib3B0aW9ucyIsImJhc2VVcmwiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImZldGNoIiwiX2NoZWNrRXJyb3JzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJhdXRob3JpemF0aW9uIiwiaW5pdGlhbFByb2ZpbGUiLCJnZXRJbml0aWFsUHJvZmlsZSIsImluaXRpYWxDYXJkcyIsImdldEluaXRpYWxDYXJkcyIsImFsbCIsInVzZXJEYXRhIiwiY2FyZHMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2FyZExpc3QiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJjcmVhdGVDYXJkIiwiaW1hZ2VFeHBhbmRNb2RhbCIsIm9wZW4iLCJkZWxldGVDYXJkTW9kYWwiLCJidXR0b25MaWtlZCIsImxpa2VDYXJkIiwicmVtb3ZlTGlrZSIsImdldElkIiwiY2FyZCIsImdldFZpZXciLCJhZGRJdGVtIiwiYWRkQ2FyZE1vZGFsIiwiZmV0Y2hDYXJkIiwiY2FyZERhdGEiLCJuZXdDYXJkIiwiZXJyIiwiZmluYWxseSIsImRlbGV0ZUNhcmQiLCJwcm9maWxlTW9kYWwiLCJwcm9maWxlIiwiZmV0Y2hQcm9maWxlSW5mbyIsInByb2ZpbGVEYXRhIiwiY2hhbmdlUHJvZmlsZUF2YXRhck1vZGFsIiwiY2hhbmdlUHJvZmlsZUF2YXRhciIsImF2YXRhckRhdGEiLCJzZXRBdmF0YXJJbWFnZSIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZXNldFZhbGlkYXRpb24iLCJwcm9maWxlSW5mbyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==