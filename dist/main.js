!function(){"use strict";var e={modalSelector:"modal",profileModalSelector:"modal_profile",modalProfile:document.querySelector(".modal_profile"),profileFormEL:document.querySelector(".modal__form_type_edit-form"),profileEditButton:document.querySelector(".profile__edit-button"),profileFormCloseButton:document.querySelector(".modal__close-button_type_profile"),profileAddButton:document.querySelector(".profile__add-button"),profileFormNameInput:document.querySelector(".modal__info_place_name-input"),profileFormAboutMeInput:document.querySelector(".modal__info_place_about-me-input"),profileTitle:document.querySelector(".profile__title"),profileSubtitle:document.querySelector(".profile__subtitle")},t={addCardSelector:"modal_add-card",deleteCardSelector:"modal_delete",addModalEl:document.querySelector(".modal_add-card"),addFormEl:document.querySelector(".modal__form_type_new-place"),addFormCloseButton:document.querySelector(".modal__close-button_type_new-place"),addFormPlaceInput:document.querySelector(".modal__info_place_new-title-input"),addFormUrlInput:document.querySelector(".modal__info_place_url-input")},n={avatarModalSelector:"modal_avatar",avatarEditButton:document.querySelector(".profile__avatar-button"),avatarFormEl:document.querySelector(".modal__form_type_avatar"),avatarElement:document.querySelector(".profile__image")},r={formSelector:"modal__form",inputSelector:".modal__info",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__info_type_error",errorClass:"modal__error_active"};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.data,o=t.handlePreviewImage,i=t.handleLikeIcon,a=t.handleDeleteIcon,l=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userId=l,this._name=r.name,this._link=r.link,this._likedCard=r.likes,this._numberLikes=r.likes.length,this._handlePreviewImage=o,this._handleLikeIcon=i,this._handleDeleteIcon=a,this._cardId=r._id,this._ownerId=r.owner._id,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){var e=document.querySelector(this._cardSelector).content.querySelector(".elements__container").cloneNode(!0);this._element=e}},{key:"getView",value:function(){this._getTemplate(),this._setEventListeners();var e=this._element.querySelector(".elements__image");return this._element.querySelector(".elements__text").textContent=this._name,e.src=this._link,e.alt=this._name,this._getInitialLikes(e),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__image").addEventListener("click",(function(){return e._handlePreviewImage()})),this._deleteButton=this._element.querySelector(".elements__delete"),this._ownerId===this._userId?this._deleteButton.addEventListener("click",(function(t){e._handleDeleteIcon(t)})):this._deleteButton.remove(),this._heartLike=this._element.querySelector(".elements__heart"),this._heartLike.addEventListener("click",(function(t){e._liked(t)}))}},{key:"_handleLikeIcon",value:function(){this._heartLike.classList.toggle("elements__heart_active")}},{key:"_handleDeleteIcon",value:function(){this._element.remove()}},{key:"_checkLikes",value:function(e){this._element.querySelector(".elements__heart-number").textContent=e.likes.length}},{key:"_liked",value:function(e){var t=this;this._handleLikeIcon(!e.target.classList.contains(".elements__heart_active")).then((function(n){e.target.classList.toggle(".elements__heart_active"),t._checkLikes(n)})).catch((function(e){console.log("Error:".concat(e))}))}},{key:"_getInitialLikes",value:function(){var e=this;this._likedCard.some((function(t){return t._id===e._userId}))&&this._heartLike.classList.add("elements__heart_active"),this._element.querySelector(".elements__heart-number").textContent=this._numberLikes}}])&&o(t.prototype,n),e}();function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_showInputError",(function(e){var t=r._formEl.querySelector("#"+e.id+"-error");e.classList.add(r._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(r._errorClass)})),c(this,"_hideInputError",(function(e){var t=r._formEl.querySelector("#"+e.id+"-error");e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),c(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e)})),c(this,"_hasValidInputs",(function(e){return e.every((function(e){return e.validity.valid}))})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formEl=n}var t,n;return t=e,(n=[{key:"_toggleButton",value:function(){this._hasValidInputs(this._inputList)?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e,t=this;this._inputList=function(e){if(Array.isArray(e))return a(e)}(e=this._formEl.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputList.forEach((function(e){e.addEventListener("input",(function(n){t._checkInputValidity(e),t._toggleButton()}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButton(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._formEl.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&l(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modalElement=document.querySelector(".".concat(t)),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._modalElement.addEventListener("click",(function(t){(t.target.classList.contains("modal")||t.target.classList.contains("modal__close-button"))&&e.close()}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._modalElement.classList.add("modal_toggle"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._modalElement.classList.remove("modal_toggle"),document.removeEventListener("keydown",this._handleEscClose)}}])&&s(t.prototype,n),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},_(e,t,n||e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function y(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(){return h(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._modalElement.querySelector(".modal__image-subtitle").textContent=n;var r=this._modalElement.querySelector(".modal__image-preview");r.src=t,r.alt=n,_(v(a.prototype),"open",this).call(this)}}])&&m(t.prototype,n),a}(f),E=b;function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},k(e,t,n||e)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function I(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._popupForm=t._modalElement.querySelector(".modal__form"),t._handleFormSubmit=r,t._button=t._modalElement.querySelector(".modal__save-button"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=Array.from(this._modalElement.querySelectorAll(".modal__info")),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._modalElement.addEventListener("submit",(function(){e._handleFormSubmit(e._getInputValues()),e.close()})),k(C(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._popupForm.reset(),k(C(a.prototype),"close",this).call(this)}}])&&g(t.prototype,n),a}(f);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(".".concat(n))}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&O(t.prototype,n),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t){var n=t.userNameElement,r=t.userDescriptionElement,o=t.userAvatarElement,i=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameEl=n,this._userDescriptionEl=r,this._userAvatarElement=o,this._userId=i}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._userNameEl.textContent,userDescription:this._userDescriptionEl.textContent}}},{key:"getId",value:function(){return this._userId}},{key:"setUserInfo",value:function(e){this._userNameEl.textContent=e.name,this._userDescriptionEl.textContent=e.about,this._userAvatarElement.src=e.avatar,this._userId=e._id}},{key:"setAvatarImage",value:function(e){this._userAvatarElement.src=e.avatar}}])&&q(t.prototype,n),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n){document.querySelector(".".concat(t)).querySelector(".modal__save-button").textContent=n}var U=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"_checkErrors",value:function(e){return e.ok?e.json():Promise.reject("Error")}},{key:"getInitialProfile",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._checkErrors(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._checkErrors(t)}))}},{key:"fetchCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:n,link:r})}).then((function(e){return t._checkErrors(e)}))}},{key:"fetchProfileInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:n,about:r})}).then((function(e){return t._checkErrors(e)}))}},{key:"changeProfileAvatar",value:function(e){var t=this,n=e.avatar;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:n})}).then((function(e){return t._checkErrors(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._checkErrors(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._checkErrors(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._checkErrors(e)}))}}])&&B(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"f4ba53cb-c4b1-4360-b78c-98b41af44bf6","Content-Type":"application/json"}}),F=U.getInitialProfile(),D=U.getInitialCards();Promise.all([F,D]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];V.setUserInfo(o),R.renderItems(i.reverse())})).catch((function(e){console.error(e)}));var x=function(e){return new i({data:e,handlePreviewImage:function(){$.open(e)},handleDeleteIcon:function(t){N.open(t,e._id)},handleLikeIcon:function(t){return t?U.likeCard(e._id):U.removeLike(e._id)},userId:V.getId()},"#elements-template")},R=new P({renderer:function(e){var t=x(e).getView();R.addItem(t)}},"elements"),V=new j({userNameElement:e.profileTitle,userDescriptionElement:e.profileSubtitle,userAvatarElement:n.avatarElement}),M=new L({popupSelector:t.addCardSelector,handleFormSubmit:function(e){T(0,t.addCardSelector,"Creating..."),U.fetchCard(e).then((function(e){var t=x(e);R.addItem(t.getView()),M.close()})).catch((function(e){console.error(e)})).finally((function(){T(0,t.addCardSelector,"Create")}))}}),N=new L({popupSelector:t.deleteCardSelector,handleFormSubmit:function(e,n){T(0,t.deleteCardSelector,"Deleting..."),U.deleteCard(n).then((function(){e.remove(),N.close()})).catch((function(e){console.error(e)})).finally((function(){T(0,t.deleteCardSelector,"Delete")}))}}),J=new L({popupSelector:e.profileModalSelector,handleFormSubmit:function(t){T(0,e.profileModalSelector,"Updating..."),U.fetchProfileInfo(t).then((function(e){V.setUserInfo(e),J.setUserInfo(e),J.close()})).catch((function(e){console.error(e)})).finally((function(){T(0,e.profileModalSelector,"Update")}))}}),H=new L({popupSelector:n.avatarModalSelector,handleFormSubmit:function(e){T(0,n.avatarModalSelector,"Updating..."),U.changeProfileAvatar(e).then((function(e){V.setAvatarImage(e),H.close()})).catch((function(e){console.error(e)})).finally((function(){T(0,n.avatarModalSelector,"Update")}))}}),$=new E("modal_type_image-expand"),z=new u(r,e.profileFormEL),G=new u(r,t.addFormEl),K=new u(r,n.avatarFormEl);z.enableValidation(),G.enableValidation(),K.enableValidation(),M.setEventListeners(),J.setEventListeners(),$.setEventListeners(),H.setEventListeners(),N.setEventListeners(),e.profileAddButton.addEventListener("click",(function(){G.resetValidation(),M.open()})),e.profileEditButton.addEventListener("click",(function(){var t=V.getUserInfo();e.profileFormNameInput.value=t.userName,e.profileFormAboutMeInput.value=t.userDescription,J.open()})),n.avatarEditButton.addEventListener("click",(function(){H.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TixFQUFtQixJQUFJakksRUFBYy9ELEVBQW9CYixFQUFpQkksV0FDMUUwTSxFQUFzQixJQUFJbEksRUFBYy9ELEVBQW9CTCxFQUFnQkcsY0FJbEZpTSxFQUFxQkcsbUJBQ3JCRixFQUFpQkUsbUJBQ2pCRCxFQUFvQkMsbUJBRXBCbEIsRUFBYW1CLG9CQUNiWixFQUFhWSxvQkFDYjdCLEVBQWlCNkIsb0JBQ2pCUixFQUF5QlEsb0JBQ3pCM0IsRUFBZ0IyQixvQkFPaEI5TixFQUFpQlMsaUJBQWlCNkQsaUJBQWlCLFNBQVMsV0FDMURxSixFQUFpQkksa0JBQ2pCcEIsRUFBYVQsVUFHZmxNLEVBQWlCTyxrQkFBa0IrRCxpQkFBaUIsU0FBUyxXQUUzRCxJQUFNMEosRUFBY3JDLEVBQVNzQyxjQUM3QmpPLEVBQWlCVSxxQkFBcUIrSCxNQUFRdUYsRUFBWXJFLFNBQzFEM0osRUFBaUJXLHdCQUF3QjhILE1BQVF1RixFQUFZcEUsZ0JBQzdEc0QsRUFBYWhCLFVBR2Y1SyxFQUFnQkUsaUJBQWlCOEMsaUJBQWlCLFNBQVMsV0FDekRnSixFQUF5QnBCLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNhcmRDb25zdGFudHMgPSB7XG4gICAgY2FyZFNlbGVjdG9yOiAnI2VsZW1lbnRzLXRlbXBsYXRlJyxcbiAgICBwbGFjZVNlbGVjdG9yOiAnZWxlbWVudHMnLFxufVxuXG5leHBvcnQgY29uc3QgcHJvZmlsZUNvbnN0YW50cyA9IHtcblxuICAgIG1vZGFsU2VsZWN0b3I6IFwibW9kYWxcIixcbiAgICBwcm9maWxlTW9kYWxTZWxlY3RvcjogXCJtb2RhbF9wcm9maWxlXCIsXG4gICAgbW9kYWxQcm9maWxlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3Byb2ZpbGVcIiksXG4gICAgcHJvZmlsZUZvcm1FTDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV90eXBlX2VkaXQtZm9ybVwiKSxcbiAgICBwcm9maWxlRWRpdEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKSxcbiAgICBwcm9maWxlRm9ybUNsb3NlQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9wcm9maWxlXCIpLFxuICAgIHByb2ZpbGVBZGRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKSxcbiAgICBwcm9maWxlRm9ybU5hbWVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5mb19wbGFjZV9uYW1lLWlucHV0XCIpLFxuICAgIHByb2ZpbGVGb3JtQWJvdXRNZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbmZvX3BsYWNlX2Fib3V0LW1lLWlucHV0XCIpLFxuICAgIHByb2ZpbGVUaXRsZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKSxcbiAgICBwcm9maWxlU3VidGl0bGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIiksXG59XG5cbmV4cG9ydCBjb25zdCBhZGRDYXJkQ29uc3RhbnRzID0ge1xuXG4gICAgYWRkQ2FyZFNlbGVjdG9yOiBcIm1vZGFsX2FkZC1jYXJkXCIsXG4gICAgZGVsZXRlQ2FyZFNlbGVjdG9yOiBcIm1vZGFsX2RlbGV0ZVwiLFxuICAgIGFkZE1vZGFsRWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfYWRkLWNhcmRcIiksXG4gICAgYWRkRm9ybUVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX3R5cGVfbmV3LXBsYWNlXCIpLFxuICAgIGFkZEZvcm1DbG9zZUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uX3R5cGVfbmV3LXBsYWNlXCIpLFxuICAgIGFkZEZvcm1QbGFjZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbmZvX3BsYWNlX25ldy10aXRsZS1pbnB1dFwiKSxcbiAgICBhZGRGb3JtVXJsSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2luZm9fcGxhY2VfdXJsLWlucHV0XCIpLFxufVxuXG5leHBvcnQgY29uc3QgaW1hZ2VQcmV2aWV3Q29uc3RhbnRzID0ge1xuICAgIGltYWdlUHJldmlld1NlbGVjdG9yOiBcIm1vZGFsX3R5cGVfaW1hZ2UtZXhwYW5kXCIsXG59XG5cbmV4cG9ydCBjb25zdCBhdmF0YXJDb25zdGFudHMgPSB7XG5cblxuICAgIGF2YXRhck1vZGFsU2VsZWN0b3I6IFwibW9kYWxfYXZhdGFyXCIsXG4gICAgYXZhdGFyRWRpdEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnV0dG9uXCIpLFxuICAgIGF2YXRhckZvcm1FbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV90eXBlX2F2YXRhclwiKSxcbiAgICBhdmF0YXJFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpXG59XG5cblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcblxuICAgIGZvcm1TZWxlY3RvcjogXCJtb2RhbF9fZm9ybVwiLFxuICAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbmZvXCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbmZvX3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl9hY3RpdmVcIixcbn1cblxuXG4iLCJjbGFzcyBDYXJkIHtcblxuICAgIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlUHJldmlld0ltYWdlLCBoYW5kbGVMaWtlSWNvbiwgaGFuZGxlRGVsZXRlSWNvbiwgdXNlcklkIH0sIGNhcmRTZWxlY3Rvcikge1xuXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgICAgdGhpcy5fbGlrZWRDYXJkID0gZGF0YS5saWtlcztcbiAgICAgICAgdGhpcy5fbnVtYmVyTGlrZXMgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5faGFuZGxlUHJldmlld0ltYWdlID0gaGFuZGxlUHJldmlld0ltYWdlO1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbiA9IGhhbmRsZUxpa2VJY29uO1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVJY29uID0gaGFuZGxlRGVsZXRlSWNvbjtcbiAgICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcblxuXG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB9XG5cbiAgICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgICAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NvbnRhaW5lclwiKVxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gY2FyZEVsZW1lbnRcbiAgICB9XG5cblxuICAgIGdldFZpZXcoKSB7XG5cbiAgICAgICAgdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltYWdlXCIpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWVcbiAgICAgICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLl9nZXRJbml0aWFsTGlrZXMoY2FyZEltYWdlKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcblxuICAgIH1cblxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pbWFnZVwiKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVQcmV2aWV3SW1hZ2UoKSk7XG5cbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19kZWxldGVcIik7XG4gICAgICAgIGlmICh0aGlzLl9vd25lcklkID09PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb24oZXZ0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faGVhcnRMaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19oZWFydFwiKVxuICAgICAgICB0aGlzLl9oZWFydExpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9saWtlZChlKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICAgICAgdGhpcy5faGVhcnRMaWtlLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19faGVhcnRfYWN0aXZlXCIpO1xuICAgIH1cblxuICAgIF9oYW5kbGVEZWxldGVJY29uKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cblxuXG4gICAgX2NoZWNrTGlrZXMoZGF0YSkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2hlYXJ0LW51bWJlclwiKS50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIF9saWtlZChlKSB7XG5cblxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbihcbiAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCIuZWxlbWVudHNfX2hlYXJ0X2FjdGl2ZVwiKVxuICAgICAgICApLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCIuZWxlbWVudHNfX2hlYXJ0X2FjdGl2ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrTGlrZXMoZGF0YSk7XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiR7ZXJyb3J9YClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2dldEluaXRpYWxMaWtlcygpIHtcbiAgICAgICAgY29uc3QgdXNlckxpa2VDYXJkID0gdGhpcy5fbGlrZWRDYXJkLnNvbWUoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpO1xuICAgICAgICBpZiAodXNlckxpa2VDYXJkKSB7XG4gICAgICAgICAgICB0aGlzLl9oZWFydExpa2UuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRzX19oZWFydF9hY3RpdmVcIilcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2hlYXJ0LW51bWJlclwiKS50ZXh0Q29udGVudCA9IHRoaXMuX251bWJlckxpa2VzO1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuXG5cbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dCkgPT4ge1xuXG4gICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yU3Bhbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuXG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcblxuICAgIGNvbnN0IGVycm9yU3BhbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKVxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvclNwYW4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvclNwYW4udGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0KSA9PiB7XG5cbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfTtcblxuICBfaGFzVmFsaWRJbnB1dHMgPSAoaW5wdXRMaXN0KSA9PiB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG5cbiAgX3RvZ2dsZUJ1dHRvbigpIHtcblxuICAgIGlmICh0aGlzLl9oYXNWYWxpZElucHV0cyh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b24oKVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3BvcHVwU2VsZWN0b3J9YCk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuXG4gICAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF90b2dnbGVcIik7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF90b2dnbGVcIik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG59XG5cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwJztcblxuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBvcGVuKHsgbGluaywgbmFtZSB9KSB7XG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1zdWJ0aXRsZVwiKS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXByZXZpZXdcIik7XG4gICAgICAgIGltYWdlLnNyYyA9IGxpbms7XG4gICAgICAgIGltYWdlLmFsdCA9IG5hbWU7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcblxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG5cbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0XG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiKVxuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5mb1wiKSk7XG5cbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y29udGFpbmVyU2VsZWN0b3J9YCk7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG5cbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lRWxlbWVudCwgdXNlckRlc2NyaXB0aW9uRWxlbWVudCwgdXNlckF2YXRhckVsZW1lbnQsIHVzZXJJZCB9KSB7XG5cbiAgICAgICAgdGhpcy5fdXNlck5hbWVFbCA9IHVzZXJOYW1lRWxlbWVudDtcbiAgICAgICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWwgPSB1c2VyRGVzY3JpcHRpb25FbGVtZW50O1xuICAgICAgICB0aGlzLl91c2VyQXZhdGFyRWxlbWVudCA9IHVzZXJBdmF0YXJFbGVtZW50O1xuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1c2VyTmFtZTogdGhpcy5fdXNlck5hbWVFbC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIHVzZXJEZXNjcmlwdGlvbjogdGhpcy5fdXNlckRlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQsXG4gICAgICAgIH07XG4gICAgfVxuXG5cbiAgICBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJZFxuICAgIH1cblxuXG4gICAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgICAgICAvLyBkZWJ1Z2dlcjtcbiAgICAgICAgdGhpcy5fdXNlck5hbWVFbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgICAgICB0aGlzLl91c2VyQXZhdGFyRWxlbWVudC5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICAgICAgdGhpcy5fdXNlcklkID0gZGF0YS5faWQ7XG4gICAgfVxuXG5cblxuICAgIHNldEF2YXRhckltYWdlKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQuc3JjID0gZGF0YS5hdmF0YXI7XG4gICAgfVxuXG59XG5cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCJcblxuaW1wb3J0IHtcbiAgY2FyZENvbnN0YW50cyxcbiAgYXZhdGFyQ29uc3RhbnRzLFxuICBwcm9maWxlQ29uc3RhbnRzLFxuICBhZGRDYXJkQ29uc3RhbnRzLFxuICBpbWFnZVByZXZpZXdDb25zdGFudHMsXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xuXG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIlxuLy8gaW1wb3J0IGluaXRpYWxDYXJkcyBmcm9tIFwiLi4vdXRpbHMvSW5pdGlhbENhcmRzLmpzXCJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiXG5cblxuXG5mdW5jdGlvbiBsb2FkaW5nSGFuZGxlcihsb2FkaW5nLCBwb3B1cFNlbGVjdG9yLCB0ZXh0KSB7XG4gIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cG9wdXBTZWxlY3Rvcn1gKTtcbiAgaWYgKGxvYWRpbmcpIHtcbiAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiKS50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH0gZWxzZSB7XG4gICAgbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idXR0b25cIikudGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9XG59XG5cblxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImY0YmE1M2NiLWM0YjEtNDM2MC1iNzhjLTk4YjQxYWY0NGJmNlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmNvbnN0IGluaXRpYWxQcm9maWxlID0gYXBpLmdldEluaXRpYWxQcm9maWxlKCk7XG5jb25zdCBpbml0aWFsQ2FyZHMgPSBhcGkuZ2V0SW5pdGlhbENhcmRzKCk7XG5cblxuXG5Qcm9taXNlLmFsbChbaW5pdGlhbFByb2ZpbGUsIGluaXRpYWxDYXJkc10pXG5cbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzLnJldmVyc2UoKSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfSk7XG5cblxuXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGRhdGEsXG4gICAgICBoYW5kbGVQcmV2aWV3SW1hZ2U6ICgpID0+IHtcbiAgICAgICAgaW1hZ2VFeHBhbmRNb2RhbC5vcGVuKGRhdGEpXG4gICAgICB9LFxuICAgICAgaGFuZGxlRGVsZXRlSWNvbjogKGV2dCkgPT4ge1xuICAgICAgICBkZWxldGVDYXJkTW9kYWwub3BlbihldnQsIGRhdGEuX2lkKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVMaWtlSWNvbjogKGJ1dHRvbkxpa2VkKSA9PiB7XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbkxpa2VkID8gYXBpLmxpa2VDYXJkKGRhdGEuX2lkKSA6IGFwaS5yZW1vdmVMaWtlKGRhdGEuX2lkKVxuICAgICAgfSxcbiAgICAgIHVzZXJJZDogdXNlckluZm8uZ2V0SWQoKSxcbiAgICB9LFxuICAgIGNhcmRDb25zdGFudHMuY2FyZFNlbGVjdG9yXG4gICk7XG4gIHJldHVybiBjYXJkXG59XG5cblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoY2FyZCk7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuZ2V0VmlldygpO1xuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZENvbnN0YW50cy5wbGFjZVNlbGVjdG9yXG4pO1xuXG5cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuXG4gIHVzZXJOYW1lRWxlbWVudDogcHJvZmlsZUNvbnN0YW50cy5wcm9maWxlVGl0bGUsXG4gIHVzZXJEZXNjcmlwdGlvbkVsZW1lbnQ6IHByb2ZpbGVDb25zdGFudHMucHJvZmlsZVN1YnRpdGxlLFxuICB1c2VyQXZhdGFyRWxlbWVudDogYXZhdGFyQ29uc3RhbnRzLmF2YXRhckVsZW1lbnQsXG59KTtcblxuXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IGFkZENhcmRDb25zdGFudHMuYWRkQ2FyZFNlbGVjdG9yLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoY2FyZCkgPT4ge1xuXG4gICAgbG9hZGluZ0hhbmRsZXIodHJ1ZSwgYWRkQ2FyZENvbnN0YW50cy5hZGRDYXJkU2VsZWN0b3IsIFwiQ3JlYXRpbmcuLi5cIilcblxuICAgIGFwaS5mZXRjaENhcmQoY2FyZCkudGhlbigoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZC5nZXRWaWV3KCkpO1xuICAgICAgYWRkQ2FyZE1vZGFsLmNsb3NlKClcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgIGxvYWRpbmdIYW5kbGVyKGZhbHNlLCBhZGRDYXJkQ29uc3RhbnRzLmFkZENhcmRTZWxlY3RvciwgXCJDcmVhdGVcIik7XG4gICAgfSlcbiAgfSxcbn0pO1xuXG5cbmNvbnN0IGRlbGV0ZUNhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogYWRkQ2FyZENvbnN0YW50cy5kZWxldGVDYXJkU2VsZWN0b3IsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChjYXJkRWxlbWVudCwgY2FyZElkKSA9PiB7XG5cblxuICAgIGxvYWRpbmdIYW5kbGVyKHRydWUsIGFkZENhcmRDb25zdGFudHMuZGVsZXRlQ2FyZFNlbGVjdG9yLCBcIkRlbGV0aW5nLi4uXCIpO1xuXG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKS50aGVuKCgpID0+IHtcbiAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgZGVsZXRlQ2FyZE1vZGFsLmNsb3NlKCk7XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgbG9hZGluZ0hhbmRsZXIoZmFsc2UsIGFkZENhcmRDb25zdGFudHMuZGVsZXRlQ2FyZFNlbGVjdG9yLCBcIkRlbGV0ZVwiKTtcbiAgICB9KVxuICB9XG59KVxuXG5cbmNvbnN0IHByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogcHJvZmlsZUNvbnN0YW50cy5wcm9maWxlTW9kYWxTZWxlY3RvcixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHByb2ZpbGUpID0+IHtcblxuICAgIGxvYWRpbmdIYW5kbGVyKHRydWUsIHByb2ZpbGVDb25zdGFudHMucHJvZmlsZU1vZGFsU2VsZWN0b3IsIFwiVXBkYXRpbmcuLi5cIilcblxuICAgIGFwaS5mZXRjaFByb2ZpbGVJbmZvKHByb2ZpbGUpLnRoZW4oKHByb2ZpbGVEYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhwcm9maWxlRGF0YSk7XG4gICAgICBwcm9maWxlTW9kYWwuc2V0VXNlckluZm8ocHJvZmlsZURhdGEpO1xuICAgICAgcHJvZmlsZU1vZGFsLmNsb3NlKCk7XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgIGxvYWRpbmdIYW5kbGVyKGZhbHNlLCBwcm9maWxlQ29uc3RhbnRzLnByb2ZpbGVNb2RhbFNlbGVjdG9yLCBcIlVwZGF0ZVwiKVxuICAgIH0pXG4gIH0sXG59KTtcblxuXG5jb25zdCBjaGFuZ2VQcm9maWxlQXZhdGFyTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG5cbiAgcG9wdXBTZWxlY3RvcjogYXZhdGFyQ29uc3RhbnRzLmF2YXRhck1vZGFsU2VsZWN0b3IsXG5cbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGF2YXRhcikgPT4ge1xuXG4gICAgbG9hZGluZ0hhbmRsZXIodHJ1ZSwgYXZhdGFyQ29uc3RhbnRzLmF2YXRhck1vZGFsU2VsZWN0b3IsIFwiVXBkYXRpbmcuLi5cIilcblxuICAgIGFwaS5jaGFuZ2VQcm9maWxlQXZhdGFyKGF2YXRhcikudGhlbigoYXZhdGFyRGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0QXZhdGFySW1hZ2UoYXZhdGFyRGF0YSlcbiAgICAgIGNoYW5nZVByb2ZpbGVBdmF0YXJNb2RhbC5jbG9zZSgpO1xuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgIGxvYWRpbmdIYW5kbGVyKGZhbHNlLCBhdmF0YXJDb25zdGFudHMuYXZhdGFyTW9kYWxTZWxlY3RvciwgXCJVcGRhdGVcIilcbiAgICB9KTtcblxuICB9LFxufSk7XG5cblxuXG5jb25zdCBpbWFnZUV4cGFuZE1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKGltYWdlUHJldmlld0NvbnN0YW50cy5pbWFnZVByZXZpZXdTZWxlY3Rvcik7XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBwcm9maWxlQ29uc3RhbnRzLnByb2ZpbGVGb3JtRUwpO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkQ2FyZENvbnN0YW50cy5hZGRGb3JtRWwpO1xuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYXZhdGFyQ29uc3RhbnRzLmF2YXRhckZvcm1FbCk7XG5cblxuXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VFeHBhbmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuY2hhbmdlUHJvZmlsZUF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5kZWxldGVDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG5cbi8vIEJ1dHRvbnMgLy9cblxuXG5wcm9maWxlQ29uc3RhbnRzLnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgYWRkQ2FyZE1vZGFsLm9wZW4oKTtcbn0pXG5cbnByb2ZpbGVDb25zdGFudHMucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblxuICBjb25zdCBwcm9maWxlSW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVDb25zdGFudHMucHJvZmlsZUZvcm1OYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby51c2VyTmFtZTtcbiAgcHJvZmlsZUNvbnN0YW50cy5wcm9maWxlRm9ybUFib3V0TWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVJbmZvLnVzZXJEZXNjcmlwdGlvbjtcbiAgcHJvZmlsZU1vZGFsLm9wZW4oKTtcbn0pO1xuXG5hdmF0YXJDb25zdGFudHMuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjaGFuZ2VQcm9maWxlQXZhdGFyTW9kYWwub3BlbigpO1xufSlcblxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgICB9XG5cbiAgICBfY2hlY2tFcnJvcnMocmVzKSB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIkVycm9yXCIpO1xuICAgIH1cblxuICAgIGdldEluaXRpYWxQcm9maWxlKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja0Vycm9ycyhyZXMpKVxuICAgIH1cblxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tFcnJvcnMocmVzKSlcbiAgICB9XG5cbiAgICBmZXRjaENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcblxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tFcnJvcnMocmVzKSlcbiAgICB9XG5cbiAgICBmZXRjaFByb2ZpbGVJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IG5hbWUsIGFib3V0OiBhYm91dCB9KSxcbiAgICAgICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja0Vycm9ycyhyZXMpKVxuICAgIH1cblxuICAgIGNoYW5nZVByb2ZpbGVBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBhdmF0YXIgfSlcbiAgICAgICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja0Vycm9ycyhyZXMpKTtcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tFcnJvcnMocmVzKSk7XG4gICAgfVxuXG4gICAgbGlrZUNhcmQoY2FyZElkKSB7XG5cbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrRXJyb3JzKHJlcykpO1xuICAgIH1cblxuICAgIHJlbW92ZUxpa2UoY2FyZElkKSB7XG5cblxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tFcnJvcnMocmVzKSk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJwcm9maWxlQ29uc3RhbnRzIiwibW9kYWxTZWxlY3RvciIsInByb2ZpbGVNb2RhbFNlbGVjdG9yIiwibW9kYWxQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUZvcm1FTCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUZvcm1DbG9zZUJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlRm9ybU5hbWVJbnB1dCIsInByb2ZpbGVGb3JtQWJvdXRNZUlucHV0IiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZVN1YnRpdGxlIiwiYWRkQ2FyZENvbnN0YW50cyIsImFkZENhcmRTZWxlY3RvciIsImRlbGV0ZUNhcmRTZWxlY3RvciIsImFkZE1vZGFsRWwiLCJhZGRGb3JtRWwiLCJhZGRGb3JtQ2xvc2VCdXR0b24iLCJhZGRGb3JtUGxhY2VJbnB1dCIsImFkZEZvcm1VcmxJbnB1dCIsImF2YXRhckNvbnN0YW50cyIsImF2YXRhck1vZGFsU2VsZWN0b3IiLCJhdmF0YXJFZGl0QnV0dG9uIiwiYXZhdGFyRm9ybUVsIiwiYXZhdGFyRWxlbWVudCIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVQcmV2aWV3SW1hZ2UiLCJoYW5kbGVMaWtlSWNvbiIsImhhbmRsZURlbGV0ZUljb24iLCJ1c2VySWQiLCJ0aGlzIiwiX3VzZXJJZCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlZENhcmQiLCJsaWtlcyIsIl9udW1iZXJMaWtlcyIsImxlbmd0aCIsIl9oYW5kbGVQcmV2aWV3SW1hZ2UiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlSWNvbiIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2NhcmRTZWxlY3RvciIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZEltYWdlIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfZ2V0SW5pdGlhbExpa2VzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJldnQiLCJyZW1vdmUiLCJfaGVhcnRMaWtlIiwiZSIsIl9saWtlZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRhcmdldCIsImNvbnRhaW5zIiwidGhlbiIsIl9jaGVja0xpa2VzIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzb21lIiwiaXRlbSIsImFkZCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiaW5wdXQiLCJlcnJvclNwYW4iLCJfZm9ybUVsIiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dExpc3QiLCJldmVyeSIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaGFzVmFsaWRJbnB1dHMiLCJfaW5wdXRMaXN0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvbiIsImlucHV0RWxlbWVudCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX21vZGFsRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJjbG9zZSIsImtleSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsImltYWdlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfYnV0dG9uIiwiQXJyYXkiLCJmcm9tIiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtcyIsIlVzZXJJbmZvIiwidXNlck5hbWVFbGVtZW50IiwidXNlckRlc2NyaXB0aW9uRWxlbWVudCIsInVzZXJBdmF0YXJFbGVtZW50IiwiX3VzZXJOYW1lRWwiLCJfdXNlckRlc2NyaXB0aW9uRWwiLCJfdXNlckF2YXRhckVsZW1lbnQiLCJ1c2VyTmFtZSIsInVzZXJEZXNjcmlwdGlvbiIsImFib3V0IiwiYXZhdGFyIiwibG9hZGluZ0hhbmRsZXIiLCJsb2FkaW5nIiwidGV4dCIsImFwaSIsIkFwaSIsIm9wdGlvbnMiLCJiYXNlVXJsIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJmZXRjaCIsIl9jaGVja0Vycm9ycyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwiYXV0aG9yaXphdGlvbiIsImluaXRpYWxQcm9maWxlIiwiZ2V0SW5pdGlhbFByb2ZpbGUiLCJpbml0aWFsQ2FyZHMiLCJnZXRJbml0aWFsQ2FyZHMiLCJhbGwiLCJ1c2VyRGF0YSIsImNhcmRzIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNhcmRMaXN0IiwicmVuZGVySXRlbXMiLCJyZXZlcnNlIiwiY3JlYXRlQ2FyZCIsImltYWdlRXhwYW5kTW9kYWwiLCJvcGVuIiwiZGVsZXRlQ2FyZE1vZGFsIiwiYnV0dG9uTGlrZWQiLCJsaWtlQ2FyZCIsInJlbW92ZUxpa2UiLCJnZXRJZCIsImNhcmQiLCJnZXRWaWV3IiwiYWRkSXRlbSIsImFkZENhcmRNb2RhbCIsImZldGNoQ2FyZCIsImNhcmREYXRhIiwibmV3Q2FyZCIsImVyciIsImZpbmFsbHkiLCJkZWxldGVDYXJkIiwicHJvZmlsZU1vZGFsIiwicHJvZmlsZSIsImZldGNoUHJvZmlsZUluZm8iLCJwcm9maWxlRGF0YSIsImNoYW5nZVByb2ZpbGVBdmF0YXJNb2RhbCIsImNoYW5nZVByb2ZpbGVBdmF0YXIiLCJhdmF0YXJEYXRhIiwic2V0QXZhdGFySW1hZ2UiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVzZXRWYWxpZGF0aW9uIiwicHJvZmlsZUluZm8iLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=