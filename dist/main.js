(()=>{"use strict";const e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_showInputError=e=>{const t=this._formEl.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)};_hideInputError=e=>{const t=this._formEl.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""};_checkInputValidity=e=>{console.log(e),e.validity.valid?this._hideInputError(e):this._showInputError(e)};_hasValidInputs=e=>e.every((e=>e.validity.valid));resetValidation(){this._formEl.reset(),this._toggleButton()}_toggleButton(){this._hasValidInputs(this._inputList)?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}_setEventListeners(){this._inputList=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButton()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},t=document.querySelector(".modal_type_image-expand"),n=t.querySelector(".modal__image-preview"),o=t.querySelector(".modal__image-subtitle"),s=e=>{e.classList.remove("modal_toggle"),e.removeEventListener("click",i),document.removeEventListener("keydown",l)},i=e=>{const t=document.querySelector(".modal_toggle");e.target===t&&s(t)},l=e=>{if("Escape"===e.key){const e=document.querySelector(".modal_toggle");s(e)}},r=document.querySelector(".modal_profile"),a=document.querySelector(".modal__form_type_edit-form"),c=document.querySelector(".profile__edit-button"),d=document.querySelector(".modal__close-button_type_profile"),_=document.querySelector(".profile__add-button"),u=document.querySelector(".modal__info_place_name-input"),m=document.querySelector(".modal__info_place_about-me-input"),h=document.querySelector(".profile__title"),p=document.querySelector(".profile__subtitle"),v=document.querySelector(".modal_add-card"),y=document.querySelector(".modal__form_type_new-place"),g=document.querySelector(".modal__close-button_type_new-place"),S=document.querySelector(".modal__info_place_new-title-input"),L=document.querySelector(".modal__info_place_url-input"),E=document.querySelector(".modal_type_image-expand"),q=(E.querySelector(".modal__image-preview"),E.querySelector(".modal__close-button_place_image-expand")),b=(E.querySelector(".modal__image-subtitle"),document.querySelector(".elements")),k=e=>{e.classList.add("modal_toggle"),e.addEventListener("click",w),document.addEventListener("keydown",C)},f=e=>{e.classList.remove("modal_toggle"),e.removeEventListener("click",w),document.removeEventListener("keydown",C)},w=e=>{e.target===e.currentTarget&&f(e.target)},C=e=>{const t=document.querySelector(".modal_toggle");27===e.keyCode&&f(t)},B=(e,s)=>{const r=new class{constructor(e,t){this._name=e.name,this._link=e.link,this._cardSelector=t}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".elements__container").cloneNode(!0)}getView(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".elements__image");return this._element.querySelector(".elements__text").textContent=this._name,e.src=this._link,e.alt=this._name,this._element}_setEventListeners(){this._element.querySelector(".elements__image").addEventListener("click",(()=>this._handleImagePreview())),this._element.querySelector(".elements__delete").addEventListener("click",(()=>this._handleDeleteIcon())),this._element.querySelector(".elements__heart").addEventListener("click",(()=>this._handleLikeIcon()))}_handleLikeIcon(){this._element.querySelector(".elements__heart").classList.toggle("elements__heart_active")}_handleDeleteIcon(){this._element.remove()}_handleImagePreview(){var e;(e=t).classList.add("modal_toggle"),e.addEventListener("click",i),document.addEventListener("keydown",l),n.src=this._link,n.alt=this._name,o.textContent=this._name}}(e,"#elements-template").getView();s.prepend(r)};[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}].forEach((e=>{B(e,b)})),a.addEventListener("submit",(function(e){e.preventDefault(),h.textContent=u.value,p.textContent=m.value,f(r)})),c.addEventListener("click",(()=>{k(r),u.value=h.textContent,m.value=p.textContent})),_.addEventListener("click",(()=>{k(v)})),d.addEventListener("click",(()=>{f(r)})),g.addEventListener("click",(()=>{f(v),y.reset()})),q.addEventListener("click",(()=>{f(E)})),y.addEventListener("submit",(e=>{e.preventDefault();const t={name:S.value,link:L.value};B(t,b),f(v),V.resetValidation()}));const x={inputSelector:".modal__info",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__info_type_error",errorClass:"modal__error_active"},I=new e(x,a),V=new e(x,y);I.enableValidation(),V.enableValidation()})();