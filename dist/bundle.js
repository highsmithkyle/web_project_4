!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function o(e,t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n(this,"_showInputError",(function(e){var t=r._formEl.querySelector("#"+e.id+"-error");e.classList.add(r._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(r._errorClass)})),n(this,"_hideInputError",(function(e){var t=r._formEl.querySelector("#"+e.id+"-error");e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),n(this,"_checkInputValidity",(function(e){console.log(e),e.validity.valid?r._hideInputError(e):r._showInputError(e)})),n(this,"_hasValidInputs",(function(e){return e.every((function(e){return e.validity.valid}))})),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}var r,i;return r=o,(i=[{key:"resetValidation",value:function(){this._formEl.reset(),this._toggleButton()}},{key:"_toggleButton",value:function(){this._hasValidInputs(this._inputList)?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var t,n=this;this._inputList=function(t){if(Array.isArray(t))return e(t)}(t=this._formEl.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputList.forEach((function(e){e.addEventListener("input",(function(t){n._checkInputValidity(e),n._toggleButton()}))}))}},{key:"enableValidation",value:function(){this._formEl.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&t(r.prototype,i),o}();function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=document.querySelector(".modal_type_image-expand"),a=i.querySelector(".modal__image-preview"),l=i.querySelector(".modal__image-subtitle"),s=function(e){e.classList.remove("modal_toggle"),e.removeEventListener("click",u),document.removeEventListener("keydown",c)},u=function(e){var t=document.querySelector(".modal_toggle");e.target===t&&s(t)},c=function(e){if("Escape"===e.key){var t=document.querySelector(".modal_toggle");s(t)}},d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__container").cloneNode(!0)}},{key:"getView",value:function(){this._element=this._getTemplate(),this._setEventListeners();var e=this._element.querySelector(".elements__image");return this._element.querySelector(".elements__text").textContent=this._name,e.src=this._link,e.alt=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__image").addEventListener("click",(function(){return e._handleImagePreview()})),this._element.querySelector(".elements__delete").addEventListener("click",(function(){return e._handleDeleteIcon()})),this._element.querySelector(".elements__heart").addEventListener("click",(function(){return e._handleLikeIcon()}))}},{key:"_handleLikeIcon",value:function(){this._element.querySelector(".elements__heart").classList.toggle("elements__heart_active")}},{key:"_handleDeleteIcon",value:function(){this._element.remove()}},{key:"_handleImagePreview",value:function(){var e;(e=i).classList.add("modal_toggle"),e.addEventListener("click",u),document.addEventListener("keydown",c),a.src=this._link,a.alt=this._name,l.textContent=this._name}}])&&r(t.prototype,n),e}(),_=document.querySelector(".modal_profile"),m=document.querySelector(".modal__form_type_edit-form"),f=document.querySelector(".profile__edit-button"),v=document.querySelector(".modal__close-button_type_profile"),y=document.querySelector(".profile__add-button"),h=document.querySelector(".modal__info_place_name-input"),p=document.querySelector(".modal__info_place_about-me-input"),g=document.querySelector(".profile__title"),b=document.querySelector(".profile__subtitle"),S=document.querySelector(".modal_add-card"),k=document.querySelector(".modal__form_type_new-place"),E=document.querySelector(".modal__close-button_type_new-place"),L=document.querySelector(".modal__info_place_new-title-input"),q=document.querySelector(".modal__info_place_url-input"),w=document.querySelector(".modal_type_image-expand"),C=(w.querySelector(".modal__image-preview"),w.querySelector(".modal__close-button_place_image-expand")),B=(w.querySelector(".modal__image-subtitle"),document.querySelector(".elements")),x=function(e){e.classList.add("modal_toggle"),e.addEventListener("click",V),document.addEventListener("keydown",j)},I=function(e){e.classList.remove("modal_toggle"),e.removeEventListener("click",V),document.removeEventListener("keydown",j)},V=function(e){e.target===e.currentTarget&&I(e.target)},j=function(e){var t=document.querySelector(".modal_toggle");27===e.keyCode&&I(t)},A=function(e,t){var n=new d(e,"#elements-template").getView();t.prepend(n)};[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}].forEach((function(e){A(e,B)})),m.addEventListener("submit",(function(e){e.preventDefault(),g.textContent=h.value,b.textContent=p.value,I(_)})),f.addEventListener("click",(function(){x(_),h.value=g.textContent,p.value=b.textContent})),y.addEventListener("click",(function(){x(S)})),v.addEventListener("click",(function(){I(_)})),E.addEventListener("click",(function(){I(S),k.reset()})),C.addEventListener("click",(function(){I(w)})),k.addEventListener("submit",(function(e){e.preventDefault();var t={name:L.value,link:q.value};A(t,B),I(S),D.resetValidation()}));var P={inputSelector:".modal__info",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__info_type_error",errorClass:"modal__error_active"},T=new o(P,m),D=new o(P,k);T.enableValidation(),D.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Jbml0aWFsQ2FyZHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG5cbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG5cbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yU3Bhbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuXG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvclNwYW4gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihcIiNcIiArIGlucHV0LmlkICsgXCItZXJyb3JcIilcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JTcGFuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JTcGFuLnRleHRDb250ZW50ID0gXCJcIjtcblxuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGlucHV0KVxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNWYWxpZElucHV0cyA9IChpbnB1dExpc3QpID0+IHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuXG4gIH1cblxuICAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbC5yZXNldCgpO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xuICAgIFxuICAgfVxuXG4gIF90b2dnbGVCdXR0b24oKSB7XG5cbiAgICBpZiAodGhpcy5faGFzVmFsaWRJbnB1dHModGhpcy5faW5wdXRMaXN0KSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICB9XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKClcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImNvbnN0IG1vZGFsSW1hZ2VFeHBhbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3R5cGVfaW1hZ2UtZXhwYW5kXCIpO1xuY29uc3QgbW9kYWxJbWFnZVByZXZpZXdFbCA9IG1vZGFsSW1hZ2VFeHBhbmQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiKTtcbmNvbnN0IG1vZGFsSW1hZ2VTdWJ0aXRsZSA9IG1vZGFsSW1hZ2VFeHBhbmQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2Utc3VidGl0bGVcIilcblxuY29uc3Qgb3Blbk1vZGFsID0gKG1vZGFsKSA9PiB7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX3RvZ2dsZVwiKTtcbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VNb2RhbENsaWNrKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU1vZGFsRXNjKTtcbn07XG5cbmNvbnN0IGNsb3NlTW9kYWwgPSAobW9kYWwpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfdG9nZ2xlXCIpO1xuICAgIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsQ2xpY2spO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxFc2MpO1xufTtcblxuY29uc3QgY2xvc2VNb2RhbENsaWNrID0gKGUpID0+IHtcbiAgICBjb25zdCBtb2RhbFRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfdG9nZ2xlXCIpO1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWxUb2dnbGUpIHtcbiAgICAgICAgY2xvc2VNb2RhbChtb2RhbFRvZ2dsZSk7XG4gICAgfTtcbn07XG5cbmNvbnN0IGNsb3NlTW9kYWxFc2MgPSAoZSkgPT4ge1xuXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF90b2dnbGVcIik7XG4gICAgICAgIGNsb3NlTW9kYWwobW9kYWxUb2dnbGUpO1xuICAgIH07XG59O1xuXG5cbmNsYXNzIENhcmQge1xuXG4gICAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yKSB7XG5cbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcblxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jb250YWluZXJcIilcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50XG4gICAgfVxuXG4gICAgZ2V0VmlldygpIHtcblxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltYWdlXCIpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWVcbiAgICAgICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuXG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2VcIilcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlSW1hZ2VQcmV2aWV3KCkpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19kZWxldGVcIilcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlSWNvbigpKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faGVhcnRcIilcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oKSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faGVhcnRcIilcbiAgICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2hlYXJ0X2FjdGl2ZVwiKTtcblxuICAgIH1cblxuICAgIF9oYW5kbGVEZWxldGVJY29uKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuXG4gICAgfVxuXG4gICAgX2hhbmRsZUltYWdlUHJldmlldygpIHtcbiAgICAgICAgb3Blbk1vZGFsKG1vZGFsSW1hZ2VFeHBhbmQpXG4gICAgICAgIG1vZGFsSW1hZ2VQcmV2aWV3RWwuc3JjID0gdGhpcy5fbGluaztcbiAgICAgICAgbW9kYWxJbWFnZVByZXZpZXdFbC5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgICBtb2RhbEltYWdlU3VidGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG5cblxuIiwiXG5pbXBvcnQgaW5pdGlhbENhcmRzIGZyb20gXCIuL2NvbXBvbmVudHMvSW5pdGlhbENhcmRzLmpzXCJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcblxuXG4vLzw+PD48Pjw+PD4gUFJPRklMRSA8Pjw+PD48Pjw+Ly9cblxuY29uc3QgbW9kYWxQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9wcm9maWxlXCIpO1xuY29uc3QgcHJvZmlsZUZvcm1FTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fdHlwZV9lZGl0LWZvcm1cIik7XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRm9ybUNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uX3R5cGVfcHJvZmlsZVwiKVxuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVGb3JtTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5mb19wbGFjZV9uYW1lLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZUZvcm1BYm91dE1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbmZvX3BsYWNlX2Fib3V0LW1lLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XG5cbi8vPD48Pjw+PD48PiBBREQgQ0FSRCA8Pjw+PD48Pjw+Ly9cblxuY29uc3QgbW9kYWxBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9hZGQtY2FyZFwiKTtcbmNvbnN0IGFkZEZvcm1FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fdHlwZV9uZXctcGxhY2VcIik7XG5jb25zdCBhZGRGb3JtQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9uZXctcGxhY2VcIilcbmNvbnN0IGFkZEZvcm1QbGFjZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5mb19wbGFjZV9uZXctdGl0bGUtaW5wdXRcIik7XG5jb25zdCBhZGRGb3JtVXJsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbmZvX3BsYWNlX3VybC1pbnB1dFwiKTtcblxuLy88Pjw+PD48Pjw+IElNQUdFIFBSRVZJRVcgPD48Pjw+PD48Pi8vXG5cbmNvbnN0IG1vZGFsSW1hZ2VFeHBhbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3R5cGVfaW1hZ2UtZXhwYW5kXCIpO1xuY29uc3QgbW9kYWxJbWFnZVByZXZpZXdFbCA9IG1vZGFsSW1hZ2VFeHBhbmQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiKTtcbmNvbnN0IG1vZGFsSW1hZ2VFeHBhbmRDbG9zZUJ1dHRvbiA9IG1vZGFsSW1hZ2VFeHBhbmQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uX3BsYWNlX2ltYWdlLWV4cGFuZFwiKTtcbmNvbnN0IG1vZGFsSW1hZ2VTdWJ0aXRsZSA9IG1vZGFsSW1hZ2VFeHBhbmQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2Utc3VidGl0bGVcIilcblxuLy88Pjw+PD48Pjw+IEVMRU1FTlRTIDw+PD48Pjw+PD4vL1xuXG5jb25zdCBjYXJkU2VsZWN0b3IgPSAnI2VsZW1lbnRzLXRlbXBsYXRlJztcbmNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcblxuLy88Pjw+PD48Pjw+IEZVTkNUSU9OUyA8Pjw+PD48Pjw+Ly9cblxuZnVuY3Rpb24gb3BlblByb2ZpbGVNb2RhbCgpIHtcbiAgb3Blbk1vZGFsKG1vZGFsUHJvZmlsZSk7XG4gIHByb2ZpbGVGb3JtTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuICBwcm9maWxlRm9ybUFib3V0TWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVTdWJ0aXRsZS50ZXh0Q29udGVudDtcblxufVxuXG5jb25zdCBvcGVuTW9kYWwgPSAobW9kYWwpID0+IHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX3RvZ2dsZVwiKTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlTW9kYWxDbGljayk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxFc2MpO1xufTtcblxuY29uc3QgY2xvc2VNb2RhbCA9IChtb2RhbCkgPT4ge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfdG9nZ2xlXCIpO1xuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VNb2RhbENsaWNrKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEVzYyk7XG59O1xuXG5jb25zdCBjbG9zZU1vZGFsQ2xpY2sgPSAoZSkgPT4ge1xuXG4gIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgY2xvc2VNb2RhbChlLnRhcmdldCk7XG4gIH07XG59O1xuXG5jb25zdCBjbG9zZU1vZGFsRXNjID0gKGUpID0+IHtcbiAgY29uc3QgbW9kYWxUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3RvZ2dsZVwiKTtcbiAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcbiAgICBjbG9zZU1vZGFsKG1vZGFsVG9nZ2xlKTtcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIHByb2ZpbGVGb3JtU3VibWl0SGFuZGxlcihldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBwcm9maWxlRm9ybU5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50ID0gcHJvZmlsZUZvcm1BYm91dE1lSW5wdXQudmFsdWU7XG4gIGNsb3NlTW9kYWwobW9kYWxQcm9maWxlKTtcbn1cblxuLy88Pjw+PD48Pjw+IENBUkRTIDw+PD48Pjw+PD4vL1xuXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEsIGNvbnRhaW5lcikgPT4ge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoZGF0YSwgY2FyZFNlbGVjdG9yKS5nZXRWaWV3KCk7XG4gIGNvbnRhaW5lci5wcmVwZW5kKG5ld0NhcmQpO1xufVxuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICByZW5kZXJDYXJkKGNhcmQsIGVsZW1lbnRzKTtcbn0pO1xuXG4vLzw+PD48Pjw+PD4gRVZFTlQgTElTVEVORVJTIDw+PD48Pjw+PD4vLyBcblxucHJvZmlsZUZvcm1FTC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHByb2ZpbGVGb3JtU3VibWl0SGFuZGxlcilcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3BlblByb2ZpbGVNb2RhbCgpO1xufSk7XG5cbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKG1vZGFsQWRkQ2FyZCk7XG59KTtcblxucHJvZmlsZUZvcm1DbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKG1vZGFsUHJvZmlsZSk7XG59KTtcblxuYWRkRm9ybUNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwobW9kYWxBZGRDYXJkKTtcbiAgYWRkRm9ybUVsLnJlc2V0KCk7XG5cbn0pO1xuXG5tb2RhbEltYWdlRXhwYW5kQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChtb2RhbEltYWdlRXhwYW5kKTtcbn0pO1xuXG5hZGRGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBuYW1lOiBhZGRGb3JtUGxhY2VJbnB1dC52YWx1ZSxcbiAgICBsaW5rOiBhZGRGb3JtVXJsSW5wdXQudmFsdWUsXG4gIH07XG5cbiAgcmVuZGVyQ2FyZChkYXRhLCBlbGVtZW50cyk7XG4gIGNsb3NlTW9kYWwobW9kYWxBZGRDYXJkKTtcblxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuXG5cbn0pO1xuXG5cbi8vPD48Pjw+PD48PiBWQUxJREFUSU9OIDw+PD48Pjw+PD4vL1xuXG5jb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG5cbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2luZm9cIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2luZm9fdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl9hY3RpdmVcIixcbn1cblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIHByb2ZpbGVGb3JtRUwpO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsKTtcblxuXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsiLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIlxuICB9XG5dO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGluaXRpYWxDYXJkc1xuXG5cbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsImlucHV0IiwiZXJyb3JTcGFuIiwiX2Zvcm1FbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2Vycm9yQ2xhc3MiLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0TGlzdCIsImV2ZXJ5IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInJlc2V0IiwiX3RvZ2dsZUJ1dHRvbiIsIl9oYXNWYWxpZElucHV0cyIsIl9pbnB1dExpc3QiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwibW9kYWxJbWFnZUV4cGFuZCIsImRvY3VtZW50IiwibW9kYWxJbWFnZVByZXZpZXdFbCIsIm1vZGFsSW1hZ2VTdWJ0aXRsZSIsImNsb3NlTW9kYWwiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZU1vZGFsQ2xpY2siLCJjbG9zZU1vZGFsRXNjIiwibW9kYWxUb2dnbGUiLCJ0YXJnZXQiLCJrZXkiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJjYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJfaGFuZGxlSW1hZ2VQcmV2aWV3IiwiX2hhbmRsZURlbGV0ZUljb24iLCJfaGFuZGxlTGlrZUljb24iLCJ0b2dnbGUiLCJtb2RhbFByb2ZpbGUiLCJwcm9maWxlRm9ybUVMIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRm9ybUNsb3NlQnV0dG9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVGb3JtTmFtZUlucHV0IiwicHJvZmlsZUZvcm1BYm91dE1lSW5wdXQiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlU3VidGl0bGUiLCJtb2RhbEFkZENhcmQiLCJhZGRGb3JtRWwiLCJhZGRGb3JtQ2xvc2VCdXR0b24iLCJhZGRGb3JtUGxhY2VJbnB1dCIsImFkZEZvcm1VcmxJbnB1dCIsIm1vZGFsSW1hZ2VFeHBhbmRDbG9zZUJ1dHRvbiIsImVsZW1lbnRzIiwib3Blbk1vZGFsIiwiY3VycmVudFRhcmdldCIsImtleUNvZGUiLCJyZW5kZXJDYXJkIiwiY29udGFpbmVyIiwibmV3Q2FyZCIsImdldFZpZXciLCJwcmVwZW5kIiwiaW5pdGlhbENhcmRzIiwiY2FyZCIsImV2ZW50IiwidmFsdWUiLCJhZGRGb3JtVmFsaWRhdG9yIiwicmVzZXRWYWxpZGF0aW9uIiwidmFsaWRhdGlvblNldHRpbmdzIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==